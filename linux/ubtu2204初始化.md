

基础包安装

```
apt install -y vim tree wget bash-completion lsof lrzsz net-tools sysstat iotop iftop htop unzip nmap telnet bc psmisc bind9-utils netcat expect ntpdate conntrack socat curl ebtables ipset ipvsadm chrony
```

ssh速度优化

```
sed -i '/^GSSAPIAuthentication/s@^@#@g' /etc/ssh/sshd_config

cat >>/etc/ssh/sshd_config<<EOF
UseDNS no
GSSAPIAuthentication no
EOF
systemctl restart sshd

egrep '^(GSSAPIAuthentication|UseDNS)' /etc/ssh/sshd_config

```

```
# 停止 ufw 服务
sudo ufw disable

# 检查 ufw 状态（确保已关闭）
sudo ufw status

# 停止 AppArmor 服务
sudo systemctl stop apparmor

# 禁用 AppArmor（重启后不启动）
sudo systemctl disable apparmor
```





命令行颜色

```
 echo export PS1="'[\[\e[34;1m\]\u@\[\e[0m\]\[\e[32;1m\]\h\[\e[0m\]\[\e[31;1m\] \w\[\e[0m\]]\$ '">> /etc/profile 
source /etc/profile
```

时间同步

```
sed -i 's/^pool pool.*/pool cn.pool.ntp.org iburst/g' /etc/chrony/chrony.conf
timedatectl set-timezone Asia/Shanghai
systemctl enable chrony --now
chronyc sourcestats -v

```

用户初始化

```
passwd root
su root

vim /etc/ssh/sshd_config
# 添加
PermitRootLogin yes

sudo systemctl restart sshd
```

修改网络ip

```
vim /etc/netplan/01-netcfg.yaml
sudo netplan apply
```

磁盘挂载

```
lsblk
sudo fdisk -l
fdisk -f

# 格式化后挂载
mkfs.ext4 /dev/sdb
mkdir /mnt/data
mount /dev/sdb /mnt/data

#获取uuid
blkid /dev/sdb

UUID=c9666152-329b-4b58-ab44-c6885d356dd0   /mnt/data   ext4   defaults   0  2

echo 'UUID=b0bfafae-cdf4-43cd-a61b-b70692cb0073   /mnt/data   ext4   defaults   0  2' | sudo tee -a /etc/fstab

echo '/dev/sdb /mnt/data  ext4 defaults 0 0' | sudo tee -a /etc/fstab
```

每一行的格式是：

```
<设备> <挂载点> <文件系统类型> <挂载选项> <dump> <fsck>
```

- **dump**: 这个选项用于备份工具 `dump`，指定是否需要备份该文件系统。
  - `0` 表示不需要备份。
  - `1` 表示需要备份（很少用到）。
  
- **fsck**: 这个选项指定文件系统检查程序 (`fsck`) 的检查顺序。
  - `0` 表示不检查该文件系统。
  - `1` 表示优先检查该文件系统，通常是根文件系统 `/`。
  - `2` 表示次优先检查，其他的文件系统（比如 `/mnt/data`）通常会设置为 `2`，以便在系统启动时 `fsck` 按顺序检查文件系统。
  
  

```
## 关闭系统防火墙
systemctl stop firewalld && systemctl disable firewalld
## 禁止selinux
sed -i 's/^SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config
```

